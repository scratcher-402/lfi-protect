{% extends "base.html" %}

{% block title %}–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏ - –ó–ê–ú–ï–¢–ö–ò.–û–ù–õ–ê–ô–ù{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h2>–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏</h2>
    <a href="{{ url_for('new_note') }}" class="btn btn-primary">+ –ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞</a>
</div>

{% if user_notes %}
<div class="notes-section">
    <h3>–ú–æ–∏ –∑–∞–º–µ—Ç–∫–∏</h3>
    <div class="notes-grid">
        {% for note in user_notes %}
        <div class="note-card">
            <h4><a href="{{ url_for('view_note', note_id=note.id) }}">{{ note.title }}</a></h4>
            <p class="note-preview">{{ note.content[:100] }}{% if note.content|length > 100 %}...{% endif %}</p>
            <div class="note-meta">
                <span>–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ note.updated_at.strftime('%d.%m.%Y %H:%M') }}</span>
                <div class="note-actions">
                    <a href="{{ url_for('edit_note', note_id=note.id) }}">‚úèÔ∏è</a>
                    <a href="{{ url_for('share_note', note_id=note.id) }}">üë•</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% else %}
<p>–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç –∑–∞–º–µ—Ç–æ–∫. <a href="{{ url_for('new_note') }}">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é!</a></p>
{% endif %}

{% if shared_notes %}
<div class="notes-section">
    <h3>–ó–∞–º–µ—Ç–∫–∏, –∫ –∫–æ—Ç–æ—Ä—ã–º –º–Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª–∏ –¥–æ—Å—Ç—É–ø</h3>
    <div class="notes-grid">
        {% for note in shared_notes %}
        <div class="note-card">
            <h4><a href="{{ url_for('view_note', note_id=note.id) }}">{{ note.title }}</a></h4>
            <p class="note-author">–ê–≤—Ç–æ—Ä: {{ note.owner.username }}</p>
            <p class="note-preview">{{ note.content[:100] }}{% if note.content|length > 100 %}...{% endif %}</p>
            <div class="note-meta">
                <span>–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ note.updated_at.strftime('%d.%m.%Y %H:%M') }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}
